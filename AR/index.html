<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@500;600;700&display=swap" rel="stylesheet" />
  <script src="https://aframe.io/releases/1.5.0/aframe.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/mind-ar@1.2.5/dist/mindar-image-aframe.prod.js"></script>
  <style>
    :root {
      --ui-font: 'Plus Jakarta Sans', system-ui, sans-serif;
      --scan-bg: linear-gradient(135deg, #dc2626 0%, #b91c1c 100%);
      --scan-shadow: 0 4px 20px rgba(185, 28, 28, 0.4);
      --wa-bg: linear-gradient(135deg, #34d399 0%, #10b981 50%, #059669 100%);
      --wa-shadow: 0 8px 24px rgba(16, 185, 129, 0.45);
      --wa-hover: 0 12px 32px rgba(16, 185, 129, 0.5);
    }

    #target-status {
      position: fixed;
      top: 20px;
      left: 20px;
      right: 20px;
      max-width: 320px;
      padding: 14px 18px;
      background: var(--scan-bg);
      color: #fff;
      font-family: var(--ui-font);
      font-size: 14px;
      font-weight: 600;
      letter-spacing: 0.02em;
      border-radius: 14px;
      box-shadow: var(--scan-shadow);
      z-index: 9999;
      transition: transform 0.2s ease, box-shadow 0.2s ease;
      border: 1px solid rgba(255, 255, 255, 0.15);
      display: flex;
      align-items: center;
      gap: 10px;
    }
    #target-status::before {
      content: '';
      width: 8px;
      height: 8px;
      background: #fef08a;
      border-radius: 50%;
      animation: pulse-dot 1.2s ease-in-out infinite;
    }
    @keyframes pulse-dot {
      0%, 100% { opacity: 1; transform: scale(1); }
      50% { opacity: 0.6; transform: scale(0.9); }
    }
    #target-status.hidden {
      display: none;
    }

    #whatsapp-ui-btn {
      position: fixed;
      bottom: 28px;
      left: 50%;
      transform: translateX(-50%);
      padding: 14px 28px;
      background: var(--wa-bg);
      color: #fff;
      border: none;
      border-radius: 28px;
      font-size: 16px;
      font-weight: 700;
      font-family: var(--ui-font);
      letter-spacing: 0.02em;
      box-shadow: var(--wa-shadow);
      z-index: 9998;
      cursor: pointer;
      display: none;
      text-decoration: none;
      transition: transform 0.2s ease, box-shadow 0.2s ease;
      border: 2px solid rgba(255, 255, 255, 0.25);
    }
    #whatsapp-ui-btn.visible {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      gap: 10px;
      animation: btn-in 0.35s ease-out;
    }
    #whatsapp-ui-btn:hover {
      transform: translateX(-50%) translateY(-2px);
      box-shadow: var(--wa-hover);
    }
    #whatsapp-ui-btn:active {
      transform: translateX(-50%) translateY(0);
    }
    @keyframes btn-in {
      from {
        opacity: 0;
        transform: translateX(-50%) translateY(8px);
      }
      to {
        opacity: 1;
        transform: translateX(-50%) translateY(0);
      }
    }
    #whatsapp-ui-btn::before {
      content: '';
      width: 22px;
      height: 22px;
      background: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='white'%3E%3Cpath d='M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413z'/%3E%3C/svg%3E") center/contain no-repeat;
    }
  </style>
</head>
<body>
  <div id="target-status">Point camera at target image</div>
  <a href="#" id="whatsapp-ui-btn">Chat on WhatsApp</a>

  <a-scene mindar-image="imageTargetSrc: ./targets.mind;" vr-mode-ui="enabled: false" device-orientation-permission-ui="enabled: false">
    <a-assets>
      <a-asset-item id="whatsapp-model" src="whatsapp.glb"></a-asset-item>
    </a-assets>
    <a-camera position="0 0 0" look-controls="enabled: false"></a-camera>
    <a-entity id="target-0" mindar-image-target="targetIndex: 0">
      <a-image id="main-img" src="1.png" position="0 0 0.02" width="1" height="1"></a-image>
      <!-- Left: soft fade + smooth slope motion, ~1.4s -->
      <a-image class="side-img" id="side-left" src="2.jpeg" position="0 0 -0.1" width="0.5" height="0.5" material="opacity: 0"
        animation__opacity="property: material.opacity; from: 0; to: 1; dur: 1400; easing: easeInOutSine; fill: forwards; startEvents: playIn"
        animation__position="property: position; from: 0 0 -0.1; to: -0.75 0 0.03; dur: 1400; easing: easeInOutSine; fill: forwards; startEvents: playIn">
      </a-image>
      <!-- Right: soft fade + smooth slope motion, ~1.4s -->
      <a-image class="side-img" id="side-right" src="3.png" position="0 0 -0.1" width="0.5" height="0.5" material="opacity: 0"
        animation__opacity="property: material.opacity; from: 0; to: 1; dur: 1400; easing: easeInOutSine; fill: forwards; startEvents: playIn"
        animation__position="property: position; from: 0 0 -0.1; to: 0.75 0 0.03; dur: 1400; easing: easeInOutSine; fill: forwards; startEvents: playIn">
      </a-image>
      <!-- Top: soft fade + smooth slope motion, ~1.4s -->
      <a-image class="side-img" id="side-top" src="4.png" position="0 0 -0.1" width="0.5" height="0.5" material="opacity: 0"
        animation__opacity="property: material.opacity; from: 0; to: 1; dur: 1400; easing: easeInOutSine; fill: forwards; startEvents: playIn"
        animation__position="property: position; from: 0 0 -0.1; to: 0 0.55 0.03; dur: 1400; easing: easeInOutSine; fill: forwards; startEvents: playIn">
      </a-image>
      <!-- Bottom: WhatsApp 3D model â€“ slide in from behind (position a bit low) -->
      <a-entity class="side-img" id="whatsapp-btn" position="0 0 -0.1"
        animation__position="property: position; from: 0 0 -0.1; to: 0 -0.72 0.04; dur: 1400; easing: easeInOutSine; fill: forwards; startEvents: playIn">
        <a-entity gltf-model="#whatsapp-model" scale="0.4 0.4 0.4" rotation="-90 180 0"></a-entity>
      </a-entity>
    </a-entity>
  </a-scene>

  <script>
    var statusEl = document.getElementById('target-status');
    var targetEl = document.getElementById('target-0');
    var sideFromPositions = { 'side-left': '0 0 -0.1', 'side-right': '0 0 -0.1', 'side-top': '0 0 -0.1', 'whatsapp-btn': '0 0 -0.1' };
var WHATSAPP_NUMBER = '919819605451';

    function openWhatsApp() {
      var num = WHATSAPP_NUMBER.replace(/\D/g, '');
      window.location.href = 'https://wa.me/' + num;
    }

    var whatsappUiBtn = document.getElementById('whatsapp-ui-btn');
    whatsappUiBtn.addEventListener('click', function (e) {
      e.preventDefault();
      openWhatsApp();
    });

    function setAspectRatio(el, maxSize) {
      var src = el.getAttribute('src');
      if (!src) return;
      var fullSrc = new URL(src, window.location.href).href;
      var img = new Image();
      img.onload = function () {
        var w = img.naturalWidth;
        var h = img.naturalHeight;
        var width, height;
        if (w >= h) {
          width = maxSize;
          height = maxSize * (h / w);
        } else {
          height = maxSize;
          width = maxSize * (w / h);
        }
        el.setAttribute('width', width);
        el.setAttribute('height', height);
      };
      img.src = fullSrc;
    }

    document.querySelector('a-scene').addEventListener('loaded', function () {
      var mainImg = document.getElementById('main-img');
      if (mainImg) setAspectRatio(mainImg, 1);
      targetEl.querySelectorAll('.side-img').forEach(function (el) {
        setAspectRatio(el, 0.5);
      });
    });

    function playSideAnimations() {
      targetEl.querySelectorAll('.side-img').forEach(function (el) { el.emit('playIn'); });
    }
    function resetSideImages() {
      targetEl.querySelectorAll('.side-img').forEach(function (el) {
        var id = el.getAttribute('id');
        if (sideFromPositions[id]) {
          el.setAttribute('position', sideFromPositions[id]);
          if (id !== 'whatsapp-btn') {
            el.setAttribute('material', 'opacity', 0);
          }
        }
      });
    }

    targetEl.addEventListener('targetFound', function () {
      statusEl.classList.add('hidden');
      whatsappUiBtn.classList.add('visible');
      resetSideImages();
      setTimeout(playSideAnimations, 50);
    });
    targetEl.addEventListener('targetLost', function () {
      statusEl.classList.remove('hidden');
      whatsappUiBtn.classList.remove('visible');
      resetSideImages();
    });
  </script>
</body>
</html>

